services:
  opsmx:
    baseUrl: http://oes-api:8085
    enabled: true
  autopilot:
    baseUrl: http://localhost:8090
    enabled: true
  platform:
    baseUrl: http://localhost:8095
    userGroupApiPath: /platformservice/v1/users/{username}/usergroups/importAndCache
    enabled: true
  dashboard:
    baseUrl: http://localhost:8094
    enabled: true
  visibility:
    baseUrl: http://localhost:8096
    enabled: true
  auditservice:
    baseUrl: http://localhost:8097
    enabled: true
  auditclient:
    baseUrl: http://localhost:8098
    enabled: true
  oesui:
    externalUrl: http://150.238.22.102

gate:
  installation:
    mode: common #allowed values are --> oes , common

retrofit:
  connectTimeout: 30000
  readTimeout: 30000
  callTimeout: 30000
  writeTimeout: 30000
  retryOnConnectionFailure: true

cache:
  expiryTime: 600000

rbac:
  feature:
    application:
      enabled: true

security:
  basic:
    enabled: false
  user: {}
  oauth2:
    enabled: false
    client:
      clientId: # client ID
      clientSecret: # client secret
      accessTokenUri: ${oauth2.accessTokenUri}
      userAuthorizationUri: ${oauth2.userAuthorizationUri}
      scope: user:email
    resource:
      userInfoUri: ${oauth2.userInfoUri}
    userInfoMapping:
      email: email
      firstName: ''
      lastName: name
      username: ${oauth2.userInfoMapping.username}
      groupAtrributes:
        idp: idpGroups
        non-idp: groups
    provider: ${oauth2.provider}
cors:
  allowed-origins-pattern: ^https?://(?:localhost|137.117.94.95)(?::[1-9]\d*)?/?
ldap:
  enabled: true
  url: ${ldap.url}
  userDnPattern:  uid={0},ou=users,dc=example,dc=org
  managerDn: cn=admin,dc=example,dc=org
  managerPassword: ${ldap.password}
  groupSearchBase: ou=groups,dc=example,dc=org
  groupSearchFilter: member={0}
file:
  enabled: false
  url: /platformservice/v1/users/authenticate
authn:
  mode: session

saml:
  enabled: false
  keyStore: /opt/spinnaker/saml/saml.jks
  keyStorePassword: ${saml.keyStorePassword}
  keyStoreAliasName: saml
  metadataUrl: /opt/spinnaker/saml/metadata.xml
  redirectProtocol: https
  redirectHostname: ${saml.redirectHostname}
  redirectBasePath: /
  issuerId: ${saml.issuerId}
google: {}
logging:
  level:
    com.netflix.spinnaker.gate.security: INFO
    org.springframework.security: INFO
    org.springframework.web: INFO

redis:
  connection: redis://spin-redis:6379

server:
  session:
    timeout-in-seconds: 7200
  tomcat:
    protocolHeader: X-Forwarded-Proto
    remoteIpHeader: X-Forwarded-For
    internalProxies: .*

management:
  health:
    elasticsearch:
      enabled: false
    ldap:
      enabled: false
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always
      show-components: always

keycloak:
  realm: myrealm
  ldapName: ldap
  samlName: saml
  clientId: admin-rest-client
  serverUrl: http://localhost:8080/admin
  username: myuser
  password: password
  auth:
    providers:
      - name: ldap
        display: LDAP
        type: label
        helpText: LDAP
        inputparameters:
          - name: enabled
            display: Enabled
            inputType: toggle
            required: true
            helpText: Enabled
            readonly: false
            placeholder: NA
            defaultValue: ON
            loadValues: NA

          - name: editMode
            display: Edit Mode
            inputType: dropdown
            required: true
            helpText: Edit Mode
            readonly: false
            placeholder: NA
            defaultValue: NA
            loadValues:
              - READ_ONLY
              - WRITABLE
              - UNSYNCED

          - name: vendor
            display: Vendor
            inputType: dropdown
            required: true
            helpText: Vendor
            readonly: false
            placeholder: NA
            defaultValue: NA
            loadValues:
              - Active Directory
              - Red Hat Directory Server
              - Tivoli
              - Novell eDirectory
              - Other

          - name: usernameLdapAttribute
            display: Username LDAP attribute
            inputType: text
            required: true
            helpText: Username LDAP attribute
            readonly: false
            placeholder: LDAP attribute name for username
            defaultValue: NA
            loadValues: NA

          - name: rdnLdapAttribute
            display: RDN LDAP attribute
            inputType: text
            required: true
            helpText: RDN LDAP attribute
            readonly: false
            placeholder: LDAP attribute name for user RDN
            defaultValue: NA
            loadValues: NA

          - name: uuidLdapAttribute
            display: UUID LDAP attribute
            inputType: text
            required: true
            helpText: UUID LDAP attribute
            readonly: false
            placeholder: LDAP attribute name for UUID
            defaultValue: NA
            loadValues: NA

          - name: userObjectClasses
            display: User Object Classes
            inputType: text
            required: true
            helpText: User Object Classes
            readonly: false
            placeholder: LDAP User Object Classes (div. by comma)
            defaultValue: NA
            loadValues: NA

          - name: connectionUrl
            display: Connection URL
            inputType: url
            required: true
            helpText: Connection URL
            readonly: false
            placeholder: LDAP connection URL
            defaultValue: NA
            loadValues: NA

          - name: usersDN
            display: Users DN
            inputType: text
            required: true
            helpText: Users DN
            readonly: false
            placeholder: LDAP Users DN
            defaultValue: NA
            loadValues: NA

          - name: bindType
            display: Bind Type
            inputType: dropdown
            required: true
            helpText: Bind Type
            readonly: false
            placeholder: NA
            defaultValue: simple
            loadValues:
              - none
              - simple

          - name: bindDN
            display: Bind DN
            inputType: text
            required: true
            helpText: Bind DN
            readonly: false
            placeholder: LDAP Bind DN
            defaultValue: NA
            loadValues: NA

          - name: bindCredential
            display: Bind Credential
            inputType: password
            required: true
            helpText: Bind Credential
            readonly: false
            placeholder: xxxxxxx
            defaultValue: NA
            loadValues: NA

      - name: saml
        display: SAML
        type: label
        helpText: SAML
        inputparameters:
          - name: enabled
            display: Enabled
            inputType: toggle
            required: true
            helpText: Enabled
            readonly: false
            placeholder: NA
            defaultValue: ON
            loadValues: NA

          - name: redirectURI
            display: Redirect URI
            inputType: url
            required: true
            helpText: Redirect URI
            readonly: true
            placeholder: NA
            defaultValue: http://localhost:8080/realms/isd-poc-realm/saml/endpoint
            loadValues: NA

          - name: serviceProviderEntityId
            display: Service Provider Entity ID
            inputType: url
            required: true
            helpText: Service Provider Entity ID
            readonly: false
            placeholder: NA
            defaultValue: http://localhost:8080/realms/isd-poc-realm
            loadValues: NA

          - name: singleSignOnServiceUrl
            display: Single Sign-On Service URL
            inputType: url
            required: true
            helpText: Single Sign-On Service URL
            readonly: false
            placeholder: NA
            defaultValue: NA
            loadValues: NA

          - name: importFromURL
            display: Import from URL
            inputType: url
            required: false
            helpText: Import from URL
            readonly: false
            placeholder: NA
            defaultValue: NA
            loadValues: NA

          - name: importFromFile
            display: Import from file
            inputType: file
            required: false
            helpText: Import from file
            readonly: false
            placeholder: NA
            defaultValue: NA
            loadValues: NA




